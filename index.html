<iframe
style="border:none;width:100%;height:420px;background:transparent"
allow="autoplay"
srcdoc='<!doctype html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{
margin:0;
background:transparent;
font-family:Inter,Arial;
display:flex;
justify-content:center;
}

#player{
width:320px;
background:rgba(15,15,30,.6);
backdrop-filter:blur(14px);
border-radius:18px;
padding:14px;
color:#fff;
box-shadow:0 0 35px #00ffe066;
}

#cover{
height:160px;
border-radius:12px;
background:center/cover;
margin-bottom:10px;
}

#title{font-size:14px;margin-bottom:6px;}

#progress{
height:4px;
background:#222;
border-radius:2px;
overflow:hidden;
}
#progress span{
display:block;
height:100%;
width:0;
background:#00ffe0;
}

.controls{
display:flex;
justify-content:space-between;
align-items:center;
margin-top:10px;
}

.controls button{
width:42px;height:42px;
border-radius:50%;
border:none;
background:#111;
color:#00ffe0;
font-size:16px;
cursor:pointer;
}

#volume{
width:80px;
}

#playlist{
margin-top:10px;
max-height:100px;
overflow:auto;
font-size:13px;
}

#playlist div{
padding:6px;
cursor:pointer;
border-radius:6px;
}
#playlist div:hover{
background:#00ffe022;
}

canvas{
width:100%;
height:40px;
margin-top:10px;
}

.lang{
text-align:right;
font-size:12px;
cursor:pointer;
opacity:.7;
}
</style>
</head>

<body>

<div id="player">
<div class="lang" onclick="toggleLang()">RU / EN</div>

<div id="cover" style="background-image:url(https://picsum.photos/400/300)"></div>
<div id="title">‚Äî</div>

<div id="progress"><span></span></div>

<div class="controls">
<button onclick="prev()">‚èÆ</button>
<button onclick="toggle()">‚ñ∂</button>
<button onclick="next()">‚è≠</button>
<button onclick="shuffle()">üîÄ</button>
</div>

<div class="controls">
<input id="volume" type="range" min="0" max="1" step="0.01">
<button onclick="mute()">üîá</button>
</div>

<canvas id="eq"></canvas>

<div id="playlist"></div>
</div>

<script>
/* ===== DATA ===== */
const tracks=[
{title:"Track One",url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"},
{title:"Track Two",url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3"},
{title:"Track Three",url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3"}
];

let lang="ru";
const i18n={
ru:{mute:"–ó–≤—É–∫",play:"‚ñ∂",pause:"‚è∏"},
en:{mute:"Mute",play:"‚ñ∂",pause:"‚è∏"}
};

/* ===== AUDIO ===== */
let i=0;
const audio=new Audio();
audio.crossOrigin="anonymous";

/* ===== EQ ===== */
const ctx=new AudioContext();
const src=ctx.createMediaElementSource(audio);
const analyser=ctx.createAnalyser();
src.connect(analyser);
analyser.connect(ctx.destination);
analyser.fftSize=64;

const canvas=document.getElementById("eq");
const c=canvas.getContext("2d");
const data=new Uint8Array(analyser.frequencyBinCount);

function drawEQ(){
requestAnimationFrame(drawEQ);
analyser.getByteFrequencyData(data);
c.clearRect(0,0,canvas.width,canvas.height);
data.forEach((v,x)=>{
c.fillStyle="#00ffe0";
c.fillRect(x*6,canvas.height,4,-v/2);
});
}
drawEQ();

/* ===== UI ===== */
function load(){
audio.src=tracks[i].url;
title.textContent=tracks[i].title;
}
function toggle(){
ctx.resume();
audio.paused?audio.play():audio.pause();
}
function next(){i=(i+1)%tracks.length;load();audio.play();}
function prev(){i=(i-1+tracks.length)%tracks.length;load();audio.play();}
function shuffle(){i=Math.floor(Math.random()*tracks.length);load();audio.play();}
function mute(){audio.muted=!audio.muted;}

audio.ontimeupdate=()=>{
progress.children[0].style.width=(audio.currentTime/audio.duration*100)+"%";
};

/* ===== VOLUME ===== */
volume.oninput=e=>audio.volume=e.target.value;

/* ===== PLAYLIST ===== */
tracks.forEach((t,idx)=>{
const d=document.createElement("div");
d.textContent=t.title;
d.onclick=()=>{i=idx;load();audio.play();}
playlist.appendChild(d);
});

/* ===== LANG ===== */
function toggleLang(){
lang=lang==="ru"?"en":"ru";
}

/* ===== AUTO RESIZE ===== */
const ro=new ResizeObserver(()=>{
parent.postMessage({height:document.body.scrollHeight},"*");
});
ro.observe(document.body);

load();
</script>

</body>
</html>'>
</iframe>
